<div class="container">

    <div class="button-panel">
        <button class=""
            (click)="send()"
            [hidden]="editor=='scenario'"
            title="Send message back to the client">
            <i class="fa fa-send-o"></i> Send
        </button>

        <button class=""
            (click)="configureTemplate()"
            [class.configure-input]="isConfiguring"
            title="Edit the keys and default values for each field">
            <i class="fa fa-pencil"></i> Edit
        </button>
    </div>

    <div *ngFor="let pair of template"
        [class.group-row]="isRepeatingGroup(pair)">

        <div class="first-level">

            <!--<div class="key-column">
        <span>{{pair.key}}</span>
    </div>
    <div class="value-column">
        <input class="pair-value"
            [style.margin-left.px]="pair.level*15"
            [style.width.px]="158-(pair.level*15)"
            [hidden]="pair.isGroup"
            [(ngModel)]="pair.formula" />
        <span [style.margin-left.px]="((pair.level || 0)+1)*15"
            style="font-style:italic; color: #777;"
            [hidden]="!pair.isGroup">group</span>
    </div>-->

            <div class="key-column">
                <input class="configure-key"
                    [placeholder]="(editMode) ? 'key' : ''"
                    (setFocus)="true"
                    [(ngModel)]="pair.key" />
            </div>
            <div class="value-column">
                <div [style.width.px]="isRepeatingGroup(pair) ? ((level+1)*15) : (level*15)"></div>
                <input class="configure-input"
                    [class.editing]="editMode"
                    [hidden]="isRepeatingGroup(pair)"
                    [(ngModel)]="(editMode) ? pair.formula : pair.value" />

                <div class="group-placeholder"
                    [hidden]="!isRepeatingGroup(pair)">group</div>
            </div>

            <div class="menu-column">
                <nav>
                    <li><i class="fa fa-ellipsis-h"></i>
                        <nav>
                            <li><a (click)="delete(pair)">Delete</a></li>
                            <li><a (click)="insertGroup(pair)">Insert Group</a></li>
                            <li><a (click)="insert(pair)">Insert Above</a></li>
                        </nav>
                    </li>
                </nav>
            </div>
        </div>
        <div *ngIf="isRepeatingGroup(pair)">
            <field-editor [template]="pair.formula"
                [editMode]="editMode"
                [level]="level+1"></field-editor>
        </div>
    </div>
</div>